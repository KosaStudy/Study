# What is TLS

## 1. μ •μ

TSLλ” Transport Layer Securityμ μ•½μλ΅ ν•κµ­μ–΄λ΅ ν•λ©΄ μ „μ†΅ κ³„μΈµ λ³΄μ•μ΄λ©°, μΈν„°λ„·μ—μ„ μ΄λ£¨μ–΄μ§€λ” ν†µμ‹ μ΄ μ§„ν–‰λ  λ•, κ°μΈμ •λ³΄μ™€ λ°μ΄ν„° λ³΄μ•(μ „μ†΅λλ” λ°μ΄ν„° μ•”νΈν™”)μ„ λ³΄λ‹¤ μ©μ΄ν•κ² ν•  μ
μλ„λ΅ μ„¤κ³„λμ–΄ λ„λ¦¬ μ±„νƒλ `λ³΄μ• ν”„λ΅ν† μ½` μ΄λ‹¤. μ›Ή μ‘μ© ν”„λ΅κ·Έλ¨(μ›Ή μ‚¬μ΄νΈλ¥Ό λ΅λ“ν•λ” μ›Ή λΈλΌμ°μ €)κ³Ό μ„λ²„ κ°„μ ν†µμ‹ μ„ μ•”νΈν™”ν•λ” κ²ƒμ΄λ‹¤. λν•, μ΄λ©”μΌ, λ©”μ‹μ§€, λ³΄μ΄μ¤μ¤νΌ IP(VoIP) λ“± λ‹¤λ¥Έ ν†µμ‹ μ„
μ•”νΈν™”ν•κΈ° μ„ν•΄ μ‚¬μ©λλ‹¤.

λ¨λ‘— ν•Έλ“μ…°μ΄ν¬ ν”„λ΅μ„Έμ¤λ¥Ό μ©μ΄ν•κ² ν•κ³  λΈλΌμ°μ €μ™€ μ›Ή μ„λ²„ κ°„μ— μ•”νΈν™”λ ν†µμ‹ μ„ μ„¤μ •ν•λ” λ””μ§€ν„Έ μΈμ¦μ„λ¥Ό μ‚¬μ©ν•λ‹¤.

TLS ν”„λ΅ν† μ½μ€ μ•”νΈν™”, μΈμ¦, λ¬΄κ²°μ„±μ΄λΌλ” μ„Έ κ°€μ§€ μ£Όμ” μ”μ†λ¥Ό λ‹¬μ„±ν•λ‹¤.

- λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄μ•Ό ν•λ” μ΄μ λ” λ¬΄μ—‡μΌκΉ?

  λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•μ§€ μ•λ” κ²½μ° λ‹¤λ¥Έμ‚¬λμ΄ μ‹ μ©μΉ΄λ“ λ²νΈ, λΉ„λ°€λ²νΈμ™€ κ°™μ€ κ°μΈμ •λ³΄λ¥Ό λ³Ό μ μκΈ° λ•λ¬Έμ΄λ‹¤.

  TLS μΈμ¦μ„κ°€ μ—†μΌλ©΄ μ›Ή μ‚¬μ΄νΈμ™€ λ™μΌν• λ„¤νΈμ›ν¬μ— μλ” λ¨λ“  μ‚¬λμ΄ μ„λ²„ - μ›Ή λΈλΌμ°μ € κ°„μ νΈλν”½μ„ κ°€λ΅ μ± μ μλ‹¤. μ΄λ ‡κ² κ°€λ΅μ± μ •λ³΄λ¥Ό ν™•μΈκ³Ό λ™μ‹μ— λ³€μ΅°κΉμ§€ ν•  μ μλ‹¤.

- ν•Έλ“ μ„Έμ΄ν¬λ€?

  μ •μƒμ μΈ ν†µμ‹ μ΄ μ‹μ‘λκΈ° μ „μ—, λ‘ κ°μ μ‹¤μ²΄ κ°„μ— ν™•λ¦½λ ν†µμ‹  μ±„λ„μ λ³€μλ¥Ό λ™μ μΌλ΅ μ„¤μ •ν•λ” μλ™ν™”λ ν‘μƒ κ³Όμ •μ΄λ‹¤.

  μ¦‰, μ—°κ²°μ΄ μ λμ–΄ μλ”μ§€ ν™•μΈν•λ” κ³Όμ •μΌλ΅, μ„μ μ •μμ—μ„ μ μ  κ°λ…μ„ ν™•μ¥ν•΄ λ‚κ°€λ©΄ λλ‹¤.

<aside>
π’΅ TSLλ” ν†µμ‹ μ„ ν•  λ• μ§„ν–‰λλ” λ³΄μ• ν”„λ΅ν† μ½μ΄λ©°, μ›Ή μ‘μ© ν”„λ΅κ·Έλ¨ - μ„λ²„ κ°„μ ν†µμ‹ , λλ” λ‹¤λ¥Έ ν†µμ‹ μ„ μ•”νΈν™”ν•κΈ° μ„ν• κ²ƒμΌλ΅ μ”μ•½ν•  μ μλ‹¤.

**κ·ΈλΌ, μ΄μ „μ— λ°°μ› λ λ‹¤λ¥Έ λ³΄μ• ν”„λ΅ν† μ½(SSL, HTTPS)κ³Όλ” μ–΄λ–¤ μ°¨μ΄κ°€ μμ„κΉ?**

</aside>

## 2. TLS & SSLμ μ°¨μ΄μ μ€ λ¬΄μ—‡μΈκ°€?

μ§§κ² μ”μ•½ν•μλ©΄, TLSλ” SSL(Secure Sockets Layers)μ΄λΌκ³  λ¶λ¦¬λ” μ•”νΈν™” ν”„λ΅ν† μ½μ—μ„ λ°μ „ν• ν•νƒμ΄λ‹¤. SSLμ€ μ»΄ν“¨ν„° λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ ν†µμ‹  λ³΄μ•μ„ μ κ³µν•λ©° λ°μ΄ν„°μ λ¬΄κ²°μ„±κ³Ό κΈ°λ°€μ„±μ„ λ³΄νΈν•λ‹¤.
ν•μ§€λ§ TLSλ” μΈν„°λ„·μ„ ν†µν•Έ λ³΄μ• ν†µμ‹ μ„ μ„ν• ν‘μ¤€μ΄λ‹¤. ν΄λΌμ΄μ–ΈνΈ, μ„λ²„ μ–΄ν”λ¦¬μΌ€μ΄μ…μ΄ λ„μ²­ λ° μ •λ³΄ λ³€μ΅°λ¥Ό λ°©μ§€ν•λ„λ΅ μ„¤κ³„λ λ°©μ‹μ΄λ‹¤.

|        | SSL                                            | TLS                                        |
|--------|------------------------------------------------|--------------------------------------------|
| μλ―Έ     | λ³΄μ• μ†μΌ“ κ³„μΈµ                                       | μ „μ†΅ κ³„μΈµ λ³΄μ•                                   |
| λ²„μ „     | SSLμ€ TLSλ΅ λ€μ²΄                                   | TLSλ” SSLμ μ—…κ·Έλ μ΄λ“ λ λ²„μ „                       |
| μ•λ¦Ό λ©”μ„Έμ§€ | 1. λ‘ κ°€μ§€ μ ν•μ μ•λ¦Ό λ©”μ„Έμ§€ μ΅΄μ¬ <br> 2. μ•λ¦Ό λ©”μ„Έμ§€λ” μ•”νΈν™”λμ§€ μ•μ | μ•λ¦Ό λ©”μ„Έμ§€λ” μ•”νΈν™”λλ©° λ” λ‹¤μ–‘ν•¨                        |
| λ©”μ„Έμ§€ μΈμ¦ | MACμ„ μ‚¬μ©ν•λ‹¤.                                     | HMACμ„ μ‚¬μ©ν•λ‹¤.                                |
| μ•”νΈ κ·Έλ£Ή  | λ³΄μ• μ·¨μ•½μ μ΄ μλ” μ΄μ „ μ•κ³ λ¦¬μ¦ μ§€μ›                          | κ³ κΈ‰ μ•”νΈν™” μ•κ³ λ¦¬μ¦ μ‚¬μ©                             |
| ν•Έλ“ μ…°μ΄ν¬ | 1. λ…μ‹μ  μ—°κ²°   <br> 2. ν”„λ΅μ„Έμ¤ λ‹¨κ³„κ°€ λ³µμ΅ν•κ³  λλ¦¬λ‹¤.         | 1. μ•”μ‹μ  μ—°κ²°      <br>  2. λ‹¨κ³„κ°€ μ κ³  μ—°κ²° μ†λ„κ°€ λΉ λ¥΄λ‹¤. |

## 5. TLSμ μ‘λ™ μ μ°¨

λ¨Όμ €, μ›Ήμ‚¬μ΄νΈ & μ‘μ© ν”„λ΅κ·Έλ¨μ΄ TLSλ¥Ό μ‚¬μ©ν•λ ¤λ©΄ μ›λ³Έ μ„λ²„μ— TLS μΈμ¦μ„κ°€ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•λ‹¤. μΈμ¦ κΈ°κ΄€μ΄ λ„λ©”μΈμ„ μ†μ ν• μ‚¬λ νΉμ€ λΉ„μ¦λ‹μ¤μ— TLS μΈμ¦μ„λ¥Ό λ°ν–‰ν•λ‹¤.

μΈμ¦μ„μ—λ” μ„λ²„μ κ³µκ° ν‚¤μ™€ λ”λ¶μ–΄ λ„κ°€ λ„λ©”μΈ μ†μ μμΈμ§€ μ •λ³΄λ¥Ό ν¬ν•¨ν•κ³  μλ‹¤. μ΄ λ‘ κ°€μ§€λ” λ¨λ‘ μ„λ²„μ μ‹ μ›μ„ ν™•μΈν•λ”λ° μ¤‘μ”ν•λ‹¤.

μΈμ¦μ„λ¥Ό λ¨λ‘ λ°ν–‰ν–μΌλ©΄ λ‹¤μκ³Ό κ°™μ€ TLS Handshakeμ μΌλ ¨μ μμ„λ¥Ό ν†µν•΄ μ΄κΈ°ν™”λλ‹¤.

1. TLS μ—°κ²°μ€ TLS HandShakeλ¥Ό μ‚¬μ©ν•λ‹¤. μ‚¬μ©μκ°€ TLSλ¥Ό μ‚¬μ©ν•λ” μ›Ήμ‚¬μ΄νΈλ¥Ό μ ‘μ†ν•λ©΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ›Ή μ„λ²„κ°„μ TLS HandShakeκ°€ μ‹μ‘λλ‹¤.
2. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μΈμ¦μ„λ¥Ό λ°›μ•„ μ„λ²„μ λ¬΄κ²°μ„±μ„ ν™•μΈ
3. μ‹ λΆ°ν•  μ μλ” μ„λ²„λΌλ©΄, μ•”νΈν™” ν†µμ‹ μ— μ‚¬μ©ν•  λ€μΉ­ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ μ „λ‹¬ν•λ‹¤.

<aside>
π’΅ μ¦‰, λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κΈ° μ „ μ„λ²„μ λ¬΄κ²°μ„±μ„ ν™•μΈν•κ³  λ€μΉ­ν‚¤λ¥Ό μ „λ‹¬ν•λ” κ³Όμ •μ„ TLS HandShakeλΌκ³  ν•λ‹¤.

</aside>

## 6. TLS Handshake

TLS HandShakeλ¥Ό ν•λ” λ™μ• ν΄λΌμ΄μ–ΈνΈμ™€ μ›Ή μ„λ²„λ” μ•„λμ μΌμ„ μν–‰ν•λ‹¤.

1. μ‚¬μ©ν•  TLS λ²„μ „ μ§€μ •
2. μ‚¬μ©ν•  μ•”νΈ μ ν’κµ° κ²°μ • - κ³µμ λ μ•”νΈν‚¤ & μ„Έμ… ν‚¤μ™€ κ°™μ€ μ„Έλ¶€ μ •λ³΄λ¥Ό λ…μ‹ν•λ” μ•κ³ λ¦¬μ¦ μ§‘ν•©
3. μ„λ²„μ TLS μΈμ¦μ„λ¥Ό μ‚¬μ©ν•μ—¬ μ„λ²„μ μ‹ μ›μ„ μΈμ¦
4. HandShakeκ°€ μ™„λ£λ ν›„ λ©”μ„Έμ§€λ¥Ό μ•”νΈν™”ν•κΈ° μ„ν• μ„Έμ…ν‚¤ μƒμ„±

![TLS](Image/TLS1.png)

1. Client : Client Hello (μ•”νΈν™” μ•κ³ λ¦¬μ¦ λ‚μ—΄ λ° μ „λ‹¬)

   ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ β€Client Helloβ€ λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•λ©΄μ„ ν•Έλ“ μ…°μ΄ν¬λ¥Ό κ°μ‹ν•λ‹¤. μ΄ λ©”μ„Έμ§€μ—λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” `TLS λ²„μ „`, `μ§€μ›λλ” μ•”νΈ μ•κ³ λ¦¬μ¦`,
   κ·Έλ¦¬κ³  `ν΄λΌμ΄μ–ΈνΈ λ¬΄μ‘μ„ λ°μ΄ν„°` (ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±ν• λ‚μλ΅ λ€μΉ­ν‚¤λ¥Ό λ§λ“¤ λ–„ μ‚¬μ©), `μ„Έμ… ID`, `SNI(μ„λ²„λ…)`μ΄ ν¬ν•¨λλ‹¤.

    - Session IDλ€?

      λ§¤λ² μ—°κ²°ν•  λ•λ§λ‹¤ HandShake κ³Όμ •μ„ μ§„ν–‰ν•λ” κ²ƒμ„ λΉ„ν¨μ¨μ μ΄κΈ° λ•λ¬Έμ— μµμ΄ HandShake κ³Όμ •μ„ μ§„ν–‰ν•κ³  Session IDλ¥Ό κ°€μ§„λ‹¤. ν•΄λ‹Ή IDλ΅ μ„ κ³Όμ •μ„ λ°λ³΄ν•΄μ„ μ§„ν–‰ν•μ§€ μ•λ”λ‹¤.

      ![SessionId](/Image/TLS_sessionId.png)

2. Server : Server Hello (μ•”νΈν™” μ•κ³ λ¦¬μ¦ μ„ νƒ)

   Client Hello λ©”μ„Έμ§€μ— λ€ν• μ‘λ‹µμΌλ΅ μ„λ²„κ°€ `μ„λ²„μ TLS(SSL) μΈμ¦μ„`, `μ•”νΈν™” λ°©μ‹(ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ•”νΈν™” λ°©μ‹ μ¤‘μ—μ„ μ„λ²„κ°€ κ°€λ¥ν• μ•”νΈν™” λ°©μ‹ μ„ νƒ),` Server Random
   Data(μ„λ²„μ—μ„ μƒμ„±ν• λ‚μ, λ€μΉ­ν‚¤λ¥Ό λ§λ“¤ λ• μ‚¬μ©), SessionID(μ ν¨ν• Session ID)λ¥Ό μ „μ†΅ν•λ‹¤.

3. Server : Server Certificate (μΈμ¦μ„ μ „λ‹¬)

   μ„λ²„μ μΈμ¦μ„λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ” λ‹¨κ³„, CAμ μ¦λ…μ„λ„ ν•¨κ» μ „μ†΅ν•λ‹¤. (μ„λ²„μ μ •λ³΄ + μ„λ²„μ κ³µκ°ν‚¤)

4. Client : Client Key Exchange (λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•  λ€μΉ­ν‚¤ μ „λ‹¬)

   μΈμ¦μ„μ λ¬΄κ²°μ„±μ΄ κ²€μ¦λμ—μΌλ©΄(3λ² μΈμ¦ κ³Όμ •), ν΄λΌμ΄μ–ΈνΈμ λ‚μμ™€ μ„λ²„μ λ‚μλ¥Ό μ΅°ν•©ν•μ—¬ λ€μΉ­ν‚¤λ¥Ό μƒμ„±ν•λ‹¤. κ·Έλ¦¬κ³  λ€μΉ­ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤. (κ³µκ°ν‚¤λ¥Ό μ–΄λ–»κ² κ°€μ§€κ³  μλ‚? β†’ μΈμ¦μ„λ¥Ό μΈμ¦ν• 
   λ•, λ³µνΈν™”ν•λ©΄μ„ μ–»μ)

5. Server & Client : Change Ciper Cpec

   μ΄μ λ¶€ν„° μ „μ†΅λλ” λ¨λ“  ν¨ν‚·μ€ ν‘μƒλ μ•κ³ λ¦¬μ¦κ³Ό ν‚¤λ¥Ό μ΄μ©ν•μ—¬ μ•”νΈν™”ν•κ² λ‹¤κ³  μ•λ¦¬λ” λ©”μ„Έμ§€μ΄λ‹¤.

6. Server & Client : Finished(μ •λ³΄ μ „λ‹¬ μ™„λ£)
    1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λ `finished` μ™„λ£ λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•λ‹¤.
    2. μ„λ²„κ°€ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λ `finished` μ™„λ£ λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•λ‹¤.
7. μ•μ „ν• λ€μΉ­ μ•”νΈν™” μ„±κ³µ

   ν•Έλ“ μ…°μ΄ν¬κ°€ μ™„λ£λκ³  μ„Έμ… ν‚¤λ¥Ό μ΄μ©ν•΄ ν†µμ‹ μ΄ κ³„μ† μ§„ν–‰λλ‹¤.

---

## TLS & HTTPSμ μ°¨μ΄μ μ€ λ¬΄μ—‡μΈκ°€?

HTTPSλ” HTTP ν”„λ΅ν† μ½ μƒμ„μ—μ„ TLS μ•”νΈν™”λ¥Ό κµ¬ν„ν• κ²ƒμΌλ΅ λ¨λ“  μ›Ή μ‚¬μ΄νΈμ™€ λ‹¤λ¥Έ μ›Ή μ„λΉ„μ¤μ—μ„ μ‚¬μ©λλ‹¤. λ”°λΌμ„ HTTPSλ¥Ό μ‚¬μ©ν•λ” μ›Ή μ‚¬μ΄νΈλ” TLS μ•”νΈν™”λ¥Ό μ΄μ©ν•λ‹¤.