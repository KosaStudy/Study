# 최소공통조상

## 요약

<img src="https://mblogthumb-phinf.pstatic.net/20160923_99/kks227_1474632438677or22E_PNG/1.png?type=w2"/>

### 두 노드의 공통된 조상 중에서 가장 가까운 조상을 찾는 문제

---

## LCA 동작 순서

1. 모든 노드에 대한 깊이를 계산
2. 최소 공통 조상을 찾을 두 노드를 확인
3. 먼저 두 노드의 깊이가 동일하도록 거슬러 올라감
4. 부모가 같아질때까지 반복적으로 두 노드의 부모 방향으로 거슬러 올라감
5. 모든 LCA(a,b) 연산에 대해서 3~4번의 과정을 반복

## 시간복잡도

### 매 쿼리마다 부모 방향으로 거슬러 올라가기 위해서는 O(N)의 시간복잡도가 요구
### 모든 쿼리(M)를 처리할 떄의 시간복잡도는 O(NM)

---

## 개선된 LCA

- 각 노드가 거슬러 올라가는 속도를 빠르게 만드는 방법
- 2의 제곱 형태로 거슬러 올라가게 만들어 O(logN)의 시간 복잡도 보장
- 메모리를 더 사용해서 각 노드에 대해서 2^i번째 부모에 대한 정보를 기록
- 즉, 공간복잡도를 늘리고 시간 복잡도를 줄인는 trade-off 방법

### 모든 쿼리(M)을 처리할 때 시간복잡도 O(MlogN)